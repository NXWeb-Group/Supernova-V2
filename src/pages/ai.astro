---
export const prerender = false;
import Navbar from "../layouts/navAccount.astro";
import Chats from "../components/ai/ChatBox.vue";
import Rooms from "../components/ai/Roombox.vue";
import { getAccountById } from "../lib/account";

let rooms;
const accountid = await Astro.session?.get("userid");
if (!accountid) {
  rooms = undefined;
} else {
  const account = await getAccountById(accountid);
  rooms = account
    ? account.rooms 
    : undefined;
}
---

<Navbar>
  <div class="h-full flex flex-col bg-gray-700 overflow-hidden">
    <div class="flex-1 flex overflow-hidden">
      <Chats client:load />
      <Rooms client:load />
    </div>
  </div>
</Navbar>
