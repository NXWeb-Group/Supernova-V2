---
import { Image } from "astro:assets";
import settingsImage from "../assets/pics/settings.webp";
import "../assets/global.css";
const forumEnabled = process.env.FORUM === "true";
const aiEnabled = process.env.AI === "true";
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="flex flex-col h-screen">
      <nav class="bg-nav-bg z-20">
        <div class="flex flex-nowrap justify-between p-5">
          <div class="space-x-5">
            <a
              class="mx-2 font-rubik text-5xl text-title-blue hover:text-darker-blue no-underline"
              href="/"
            >
              Supernova
            </a>
            <a
              class="font-poppins text-3xl text-white hover:text-darker-blue no-underline"
              href="/search"
            >
              Search
            </a>
            <a
              class="font-poppins text-3xl text-white hover:text-darker-blue no-underline"
              href="/apps"
            >
              Apps
            </a>
            <a
              class="font-poppins text-3xl text-white hover:text-darker-blue no-underline"
              href="/games"
            >
              Games
            </a>
            {
              forumEnabled && (
                <a
                  class="font-poppins text-3xl text-white hover:text-darker-blue no-underline"
                  href="/forum"
                >
                  Forum
                </a>
              )
            }
            {
              aiEnabled && (
                <a
                  class="font-poppins text-3xl text-white hover:text-darker-blue no-underline"
                  href="/ai"
                >
                  AI
                </a>
              )
            }
          </div>
          <div class="flex items-center justify-center">
            <slot name="navbar" />
            <a href="/settings">
              <Image
                src={settingsImage}
                class="size-14 cursor-pointer"
                alt="settings"
              />
            </a>
          </div>
        </div>
      </nav>
      <div class="z-10 h-full">
        <slot />
      </div>
    </div>
  </body>
</html>

<script>
  import { startParticles } from "../assets/particles";
  import { setFavicon } from "../assets/stuff";

  function titlestuff() {
    const title = localStorage.getItem("title") || "Google";
    const icon = localStorage.getItem("icon") || "/pics/favicon/google.ico";
    document.title = title;
    setFavicon(icon);
  }
  startParticles();
  titlestuff();
</script>
